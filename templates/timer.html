<!DOCTYPE HTML>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
p {
  display: inline;
  font-size: 40px;
}
body {
    background-color: rgb(204, 0, 0);
}
.background{
    position: fixed;
    opacity: 0.1;
    z-index: -1;
    right: 0px;
    height: 100%;
    width: auto;
}
.bigbutton{
    position: absolute;
    width: 20%;
    left: 40%;
    height: 10%;
    top: 63%;
}
.countdown{
    font-size: 800%;
}
.container{
    position: absolute;
    z-index: 5;
    width: 80%;
    left: 10%;
    height: 40%;
    bottom: 45%
}
</style>
</head>
<body>
    <center>
    <div class='container'>
        <p class='countdown' id="days"></p>
        <p class='countdown' id="hours"></p>
        <p class='countdown' id="mins"></p>
        <p class='countdown' id="secs"></p>
        <h2 class='countdown' id="end"></h2>
    </div>
        <button class = 'bigbutton' onclick="reset()">Reset timer</button>
    <img class='background' src="/static/images/ourlogo.png" alt="logo" style="width:100%;">
    </center>
    <script>
    function savedtimer() {
        var datetocount = localStorage.getItem("datetocount")
        var countDownDate = new Date(datetocount).getTime();
        var myfunc = setInterval(function() {
        var now = new Date().getTime();
        var timeleft = countDownDate - now;
        
        var days = Math.floor(timeleft / (1000 * 60 * 60 * 24));
        var hours = Math.floor((timeleft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        var minutes = Math.floor((timeleft % (1000 * 60 * 60)) / (1000 * 60));
        var seconds = Math.floor((timeleft % (1000 * 60)) / 1000);
            
        // Result is output to the specific element
        document.getElementById("days").innerHTML = days + "d "
        document.getElementById("hours").innerHTML = hours + "h " 
        document.getElementById("mins").innerHTML = minutes + "m " 
        document.getElementById("secs").innerHTML = seconds + "s " 
            
        // Display the message when countdown is over
        if (timeleft < 0) {
            clearInterval(myfunc);
            document.getElementById("days").innerHTML = ""
            document.getElementById("hours").innerHTML = "" 
            document.getElementById("mins").innerHTML = ""
            document.getElementById("secs").innerHTML = ""
            document.getElementById("end").innerHTML = "ono";
        }
        }, 1000);
    }
    savedtimer();
    function reset(){
        var datetocount = window.prompt("Enter the date you want to count down to (in the form Jul 25, 2021 16:37:52): ");
        var countDownDate = new Date(datetocount).getTime();
        localStorage.setItem("time", countDownDate);
        localStorage.setItem("datetocount", datetocount);
        var myfunc = setInterval(function() {

        var now = new Date().getTime();
        var timeleft = countDownDate - now;
        localStorage.setItem("timeleft", timeleft)  
        // Calculating the days, hours, minutes and seconds left
        var days = Math.floor(timeleft / (1000 * 60 * 60 * 24));
        var hours = Math.floor((timeleft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        var minutes = Math.floor((timeleft % (1000 * 60 * 60)) / (1000 * 60));
        var seconds = Math.floor((timeleft % (1000 * 60)) / 1000);
            
        // Result is output to the specific element
        document.getElementById("days").innerHTML = days + "d "
        document.getElementById("hours").innerHTML = hours + "h " 
        document.getElementById("mins").innerHTML = minutes + "m " 
        document.getElementById("secs").innerHTML = seconds + "s " 
            
        // Display the message when countdown is over
        if (timeleft < 0) {
            clearInterval(myfunc);
            document.getElementById("days").innerHTML = ""
            document.getElementById("hours").innerHTML = "" 
            document.getElementById("mins").innerHTML = ""
            document.getElementById("secs").innerHTML = ""
            document.getElementById("end").innerHTML = "ono";
        }
        }, 1000);
        window.location.reload();
    }
    
    </script>
    <audio autoplay loop>
        <source src = "/static/audio/tick.mp3" type = "audio/mpeg">
    </audio>
</body>
</html>